{% extends 'base.html' %}

{% block body_block %}

<div class = "container">
    <div class = "row">
        <div class = "col sm12 m4">
            <div class = "card ">
                <div class = "card-image">
                    <img src="/static/images/S{{episode.season}}E{{episode.episode}}.jpg">
                </div>
                <div class = "card-content">
                    <p>
                        <strong>S{{episode.season}}E{{episode.episode}}: {{episode.title}}</strong>
                        <br>
                        <br>
                        {{episode.plot}}
                        <br>
                        <br>
                       <strong>Rating</strong>: {{episode.rating}}
                        <br>

                    </p>
                </div>

            </div>
        </div>
        <div class = "col sm12 m8">
            <div class = "card ">
                <div class = "card-content">
                    <span class = "card-title">Rating History</span>
                    <p>
                            <table class="striped centered">
                                <thead>
                                    <tr>
                                        <th data-field="opponent">Opponent</th>
                                        <th data-field="result">Result</th>
                                        <th data-field="name">New rating</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for game in games %}
                                    <tr>
                                        {% if episode.id == game.player2.id %}
                                            <td>S{{game.player1.season}}E{{game.player1.episode}} {{game.player1.title}}
                                             ({{game.player1_pre}})</td>
                                            <td>
                                                {% if game.result == 0 %}
                                                    W
                                                {% elif game.result == 1%}
                                                    L
                                                {% else %}
                                                    D
                                                {% endif %}
                                            </td>
                                            <td>
                                                {{game.player2_post}}
                                                {% if game.player2_delta > 0 %}
                                                    (+{{game.player2_delta}})
                                                {% else %}
                                                    ({{game.player2_delta}})
                                                {% endif %}
                                            </td>
                                        {% else %}
                                            <td>S{{game.player2.season}}E{{game.player2.episode}} {{game.player2.title}}
                                             ({{game.player2_pre}})</td>
                                            <td>
                                                {% if game.result == 1 %}
                                                    W
                                                {% elif game.result == 0%}
                                                    L
                                                {% else %}
                                                    D
                                                {% endif %}
                                            </td>
                                            <td>
                                                {{game.player1_post}}
                                                {% if game.player1_delta > 0 %}
                                                    (+{{game.player1_delta}})
                                                {% else %}
                                                    ({{game.player1_delta}})
                                                {% endif %}
                                            </td>
                                        {% endif %}
                                    </tr>
                                    {% empty %}
                                        This episode has not been rated yet.
                                    {% endfor %}
        </tbody>

    </table>

                    </p>
                </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}